{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst buttonResults = document.querySelector('.more-results');\n\nconst modal = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst per_page = 40;\nlet pege = 1;\nlet userSearch = '';\n\nform.addEventListener('submit', toForm);\nbuttonResults.addEventListener('click', toButton);\n\nasync function toForm(event) {\n  event.preventDefault();\n  buttonResults.classList.add('hide')\n  gallery.innerHTML = '';\n  pege = 1;\n  userSearch = form.search.value.trin();\n\n  const images = await fetchImages();\n\n  if (images.hits.length === 0) {\n    iziToast.error({\n      position: 'topRight',\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      backgroundColor: '#fff',\n    });\n  }\n  renderImages(images);\n}\n  \nasync function toButton() {\n  buttonResults.classList.add('hide');\n  const images = await fetchImages();\n  loader.classList.add('hide');\n  buttonResults.classList.remove('hide');\n\n  if (page >= Math.ceil(images.totalHits / per_page)) {\n    buttonResults.classList.add('hide');\n    iziToast.error({\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      backgroundColor: '#fff',\n    });\n  }\n  renderImages(images);\n  moveCard();\n\n  async function fetchImages() {\n    loader.classList.remove('hide');\n    page += 1;\n\n    try {\n      const images = await axios.get('https://pixabay.com/api/', {\n        params: {\n          key: '41619692-6da96b2a0003032b895baebe3',\n          q: userSearch,\n          image_type: 'photo',\n          orientation: 'horizontal',\n          safesearch: true,\n          per_page: per_page,\n          page: page,\n        },\n      });\n      return images.data;\n    } catch (error) {\n      console.log(error.message);\n    } finally {\n      loader.classList.add('hide');\n      form.reset();\n    }\n  }\n\n  async function renderImages(images) {\n    const markup = images.hits.reduce((\n      html, {\n        webformatURL, largeImageURL, tags, likes, views, comments, downloads\n      }\n    ) => {\n      return (\n        html +\n        `<li class='gallery-item'>\n              <a class='gallery-link' href='${largeImageURL}'>\n                <img\n                    class='gallery-image'\n                    src='${webformatURL}'\n                    alt='${tags}'\n                    width='360'\n                    height='200'\n                    />\n              </a>\n              <ul class='gallery-statistic'>\n                  <li><p class='statistic'>üíó Likes<span>${likes}</span></p></li>\n                  <li><p class='statistic'>üëÅÔ∏è Views<span>${views}</span></p></li>\n                  <li><p class='statistic'>üí¨ Comments<span>${comments}</span></p></li>\n                  <li><p class='statistic'>üíå Downloads<span>${downloads}</span></p></li>\n              </ul>\n            </li>`\n      );\n    },\n      ''\n    );\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n    modal.refresh();\n\n    if (images.hits.length === 0 || pege >= Math.ceil(images.totalHits / per_page)) {\n      buttonResults.classList.add('hide');\n    }\n    else {\n      buttonResults.classList.remove('hide');\n    }\n  }\n\n  function moveCard() {\n    const card = document.querySelector('.gallery-item');\n    const domRest = card.getBoundingClientRect().height;\n    window.scrollBy({\n      top: domRest * 2,\n      behavior: 'smoth',\n    });\n  }\n}"],"names":["form","gallery","loader","buttonResults","modal","SimpleLightbox","per_page","pege","userSearch","toForm","toButton","event","images","iziToast","fetchImages","renderImages","moveCard","axios","error","markup","html","webformatURL","largeImageURL","tags","likes","views","comments","downloads","domRest"],"mappings":"+vBAMA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAgB,SAAS,cAAc,eAAe,EAEtDC,EAAQ,IAAIC,EAAe,aAAc,CAC7C,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAW,GACjB,IAAIC,EAAO,EACPC,EAAa,GAEjBR,EAAK,iBAAiB,SAAUS,CAAM,EACtCN,EAAc,iBAAiB,QAASO,CAAQ,EAEhD,eAAeD,EAAOE,EAAO,CAC3BA,EAAM,eAAc,EACpBR,EAAc,UAAU,IAAI,MAAM,EAClCF,EAAQ,UAAY,GACpBM,EAAO,EACPC,EAAaR,EAAK,OAAO,MAAM,KAAI,EAEnC,MAAMY,EAAS,MAAM,cAEjBA,EAAO,KAAK,SAAW,GACzBC,EAAS,MAAM,CACb,SAAU,WACV,QAAS,2EACT,gBAAiB,MACvB,CAAK,EAEH,aAAaD,CAAM,CACrB,CAEA,eAAeF,GAAW,CACxBP,EAAc,UAAU,IAAI,MAAM,EAClC,MAAMS,EAAS,MAAME,IACrBZ,EAAO,UAAU,IAAI,MAAM,EAC3BC,EAAc,UAAU,OAAO,MAAM,EAEjC,MAAQ,KAAK,KAAKS,EAAO,UAAYN,CAAQ,IAC/CH,EAAc,UAAU,IAAI,MAAM,EAClCU,EAAS,MAAM,CACb,SAAU,WACV,QAAS,6DACT,gBAAiB,MACvB,CAAK,GAEHE,EAAaH,CAAM,EACnBI,IAEA,eAAeF,GAAc,CAC3BZ,EAAO,UAAU,OAAO,MAAM,EAC9B,MAAQ,EAER,GAAI,CAYF,OAXe,MAAMe,EAAM,IAAI,2BAA4B,CACzD,OAAQ,CACN,IAAK,qCACL,EAAGT,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUF,EACV,IACD,CACT,CAAO,GACa,IACf,OAAQY,EAAP,CACA,QAAQ,IAAIA,EAAM,OAAO,CAC/B,QAAc,CACRhB,EAAO,UAAU,IAAI,MAAM,EAC3BF,EAAK,MAAK,CACX,CACF,CAED,eAAee,EAAaH,EAAQ,CAClC,MAAMO,EAASP,EAAO,KAAK,OAAO,CAChCQ,EAAM,CACJ,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAC5D,IAGCP,EACA;AAAA,8CACsCE;AAAA;AAAA;AAAA,2BAGnBD;AAAA,2BACAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2DAMgCC;AAAA,4DACCC;AAAA,8DACEC;AAAA,+DACCC;AAAA;AAAA,mBAKzD,EACN,EAEI1B,EAAQ,mBAAmB,YAAakB,CAAM,EAC9Cf,EAAM,QAAO,EAETQ,EAAO,KAAK,SAAW,GAAKL,GAAQ,KAAK,KAAKK,EAAO,UAAYN,CAAQ,EAC3EH,EAAc,UAAU,IAAI,MAAM,EAGlCA,EAAc,UAAU,OAAO,MAAM,CAExC,CAED,SAASa,GAAW,CAElB,MAAMY,EADO,SAAS,cAAc,eAAe,EAC9B,sBAAqB,EAAG,OAC7C,OAAO,SAAS,CACd,IAAKA,EAAU,EACf,SAAU,OAChB,CAAK,CACF,CACH"}