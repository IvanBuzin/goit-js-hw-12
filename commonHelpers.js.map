{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nconst modal = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', toRenderImages);\n\nfunction toRenderImages(event) {\n  event.preventDefault();\n  gallery.innerHTML = '';\n\n  const userSearch = form.search.value.trim();\n\n  const url = new URL('https://pixabay.com/api/');\n  url.searchParams.append('key', '41619692-6da96b2a0003032b895baebe3');\n  url.searchParams.append('q', userSearch);\n  url.searchParams.append('image_type', 'photo');\n  url.searchParams.append('orientation', 'horizontal');\n  url.searchParams.append('safesearch', true);\n\n  loader.classList.remove('hide');\n\n  fetch(url)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('Your request is not ok!');\n      }\n      loader.classList.add('hide');\n      return response.json();\n    })\n    .then(images => {\n      if (images.hits.length === 0) {\n        iziToast.error({\n          title: 'Nothing found!',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      }\n      gallery.innerHTML = '';\n      gallery.innerHTML = images.hits.reduce(\n        (\n          html,\n          {\n            webformatURL,\n            largeImageURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads,\n          }\n        ) =>\n          html +\n          `<li class='gallery-item'>\n              <a class='gallery-link' href='${largeImageURL}'>\n                <img\n                    class='gallery-image'\n                    src='${webformatURL}'\n                    alt='${tags}'\n                    width='360'\n                    height='200'\n                    />\n              </a>\n              <ul class='gallery-statistic'>\n                  <li><p class='statistic'>üíó Likes<span>${likes}</span></p></li>\n                  <li><p class='statistic'>üëÅÔ∏è Views<span>${views}</span></p></li>\n                  <li><p class='statistic'>üí¨ Comments<span>${comments}</span></p></li>\n                  <li><p class='statistic'>üíå Downloads<span>${downloads}</span></p></li>\n              </ul>\n            </li>`,\n        ''\n      );\n\n      modal.refresh();\n    })\n    .catch(error => console.log(error))\n    .finally(() => form.reset());\n}\n\nconst fetchPostsBtn = document.querySelector(\".btn\");\nconst postList = document.querySelector(\".posts\");\n\n// Controls the group number\nlet page = 1;\n// Controls the number of items in the group\nlet perPage = 10;\n\nfetchPostsBtn.addEventListener(\"click\", async () => {\n  try {\n    const posts = await fetchPosts();\n    renderPosts(posts);\n    // Increase the group number\n    page += 1;\n\n    // Replace button text after first request\n    if (page > 1) {\n      fetchPostsBtn.textContent = \"Fetch more posts\";\n    }\n  } catch (error) {\n    console.log(error);\n  }\n});\n\nasync function fetchPosts() {\n  const params = new URLSearchParams({\n    _limit: perPage,\n    _page: page\n  });\n\n  const response = await axios.get(\n    `https://jsonplaceholder.typicode.com/posts?${params}`\n  );\n  return response.data;\n}\n\nfunction renderPosts(posts) {\n  const markup = posts\n    .map(({ id, title, body, userId }) => {\n      return `<li>\n          <h2 class=\"post-title\">${title.slice(0, 30)}</h2>\n          <p><b>Post id</b>: ${id}</p>\n          <p><b>Author id</b>: ${userId}</p>\n          <p class=\"post-body\">${body}</p>\n        </li>`;\n    })\n    .join(\"\");\n  postList.insertAdjacentHTML(\"beforeend\", markup);\n}"],"names":["form","gallery","loader","modal","SimpleLightbox","toRenderImages","event","userSearch","url","response","images","iziToast","html","webformatURL","largeImageURL","tags","likes","views","comments","downloads","error","fetchPostsBtn","postList","page","perPage","posts","fetchPosts","renderPosts","params","markup","id","title","body","userId"],"mappings":"6vBAKA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAQ,IAAIC,EAAe,aAAc,CAC7C,aAAc,MACd,aAAc,GAChB,CAAC,EAEDJ,EAAK,iBAAiB,SAAUK,CAAc,EAE9C,SAASA,EAAeC,EAAO,CAC7BA,EAAM,eAAc,EACpBL,EAAQ,UAAY,GAEpB,MAAMM,EAAaP,EAAK,OAAO,MAAM,KAAI,EAEnCQ,EAAM,IAAI,IAAI,0BAA0B,EAC9CA,EAAI,aAAa,OAAO,MAAO,oCAAoC,EACnEA,EAAI,aAAa,OAAO,IAAKD,CAAU,EACvCC,EAAI,aAAa,OAAO,aAAc,OAAO,EAC7CA,EAAI,aAAa,OAAO,cAAe,YAAY,EACnDA,EAAI,aAAa,OAAO,aAAc,EAAI,EAE1CN,EAAO,UAAU,OAAO,MAAM,EAE9B,MAAMM,CAAG,EACN,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,yBAAyB,EAE3C,OAAAP,EAAO,UAAU,IAAI,MAAM,EACpBO,EAAS,MACtB,CAAK,EACA,KAAKC,GAAU,CACVA,EAAO,KAAK,SAAW,GACzBC,EAAS,MAAM,CACb,MAAO,iBACP,QACE,0EACZ,CAAS,EAEHV,EAAQ,UAAY,GACpBA,EAAQ,UAAYS,EAAO,KAAK,OAC9B,CACEE,EACA,CACE,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IAEDP,EACA;AAAA,8CACoCE;AAAA;AAAA;AAAA,2BAGnBD;AAAA,2BACAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2DAMgCC;AAAA,4DACCC;AAAA,8DACEC;AAAA,+DACCC;AAAA;AAAA,mBAGvD,EACR,EAEMhB,EAAM,QAAO,CACnB,CAAK,EACA,MAAMiB,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ,IAAMpB,EAAK,MAAK,CAAE,CAC/B,CAEA,MAAMqB,EAAgB,SAAS,cAAc,MAAM,EAC7CC,EAAW,SAAS,cAAc,QAAQ,EAGhD,IAAIC,EAAO,EAEPC,EAAU,GAEdH,EAAc,iBAAiB,QAAS,SAAY,CAClD,GAAI,CACF,MAAMI,EAAQ,MAAMC,IACpBC,EAAYF,CAAK,EAEjBF,GAAQ,EAGJA,EAAO,IACTF,EAAc,YAAc,mBAE/B,OAAQD,EAAP,CACA,QAAQ,IAAIA,CAAK,CAClB,CACH,CAAC,EAED,eAAeM,GAAa,CAC1B,MAAME,EAAS,IAAI,gBAAgB,CACjC,OAAQJ,EACR,MAAOD,CACX,CAAG,EAKD,OAHiB,MAAM,MAAM,IAC3B,8CAA8CK,GAClD,GACkB,IAClB,CAEA,SAASD,EAAYF,EAAO,CAC1B,MAAMI,EAASJ,EACZ,IAAI,CAAC,CAAE,GAAAK,EAAI,MAAAC,EAAO,KAAAC,EAAM,OAAAC,CAAM,IACtB;AAAA,mCACsBF,EAAM,MAAM,EAAG,EAAE;AAAA,+BACrBD;AAAA,iCACEG;AAAA,iCACAD;AAAA,cAE5B,EACA,KAAK,EAAE,EACVV,EAAS,mBAAmB,YAAaO,CAAM,CACjD"}