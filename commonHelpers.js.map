{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst buttonResults = document.querySelector('.more-results');\n\nconst modal = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst per_page = 40;\nlet pege = 1;\nconst totalPages = Math.ceil(500 / per_page);\nlet userSearch = '';\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  userSearch = form.search.value.trim();\n\n  try {\n    loader.classList.remove('hide');\n    const images = await fetchImages();\n    renderImages(images);\n  } catch (error) {\n    console.log(error.message);\n  } finally {\n    loader.classList.add('hide');\n    console.log();\n  }\n\n  buttonResults.addEventListener('click',async () => {\n    try {\n      loader.classList.remove('hide');\n      const images = await fetchImages();\n      renderImages(images);\n\n      if (page > totalPages) {\n        iziToast.error({\n          position: 'topRight',\n          message: \"We`re sorry, but you`ve reached the end of search results.\",\n        });\n      }\n\n      loader.classList.add('hide');\n    } catch (error) {\n      console.log(error.message);\n    } finally {\n      loader.classList.add('hide');\n      console.log();\n    }\n  });\n});\n\nasync function fetchImages() {\n  page += 1;\n\n  const images = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '41619692-6da96b2a0003032b895baebe3',\n      q: userSearch,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: per_page,\n      page: page,\n    },\n  });\n  return images.data;\n}\n\nasync function renderImages(images) {\n  const markup = images.hits.reduce((\n    html, {\n      webformatURL, largeImageURL, tags, likes, views, comments, downloads\n    }\n  ) => {\n    return (\n      html +\n      `<li class='gallery-item'>\n              <a class='gallery-link' href='${largeImageURL}'>\n                <img\n                    class='gallery-image'\n                    src='${webformatURL}'\n                    alt='${tags}'\n                    width='360'\n                    height='200'\n                    />\n              </a>\n              <ul class='gallery-statistic'>\n                  <li><p class='statistic'>üíó Likes<span>${likes}</span></p></li>\n                  <li><p class='statistic'>üëÅÔ∏è Views<span>${views}</span></p></li>\n                  <li><p class='statistic'>üí¨ Comments<span>${comments}</span></p></li>\n                  <li><p class='statistic'>üíå Downloads<span>${downloads}</span></p></li>\n              </ul>\n            </li>`\n    );\n  },\n ''\n );\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  modal.refresh();\n  buttonResults.classList.remove('hide');\n}\n"],"names":["form","gallery","loader","buttonResults","modal","SimpleLightbox","per_page","totalPages","userSearch","event","images","fetchImages","renderImages","error","iziToast","axios","markup","html","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"owBAMA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAgB,SAAS,cAAc,eAAe,EAEtDC,EAAQ,IAAIC,EAAe,aAAc,CAC7C,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAW,GAEXC,EAAa,KAAK,KAAK,IAAMD,CAAQ,EAC3C,IAAIE,EAAa,GAEjBR,EAAK,iBAAiB,SAAU,MAAMS,GAAS,CAC7CA,EAAM,eAAc,EACpBD,EAAaR,EAAK,OAAO,MAAM,KAAI,EAEnC,GAAI,CACFE,EAAO,UAAU,OAAO,MAAM,EAC9B,MAAMQ,EAAS,MAAMC,IACrBC,EAAaF,CAAM,CACpB,OAAQG,EAAP,CACA,QAAQ,IAAIA,EAAM,OAAO,CAC7B,QAAY,CACRX,EAAO,UAAU,IAAI,MAAM,EAC3B,QAAQ,IAAG,CACZ,CAEDC,EAAc,iBAAiB,QAAQ,SAAY,CACjD,GAAI,CACFD,EAAO,UAAU,OAAO,MAAM,EAC9B,MAAMQ,EAAS,MAAMC,IACrBC,EAAaF,CAAM,EAEf,KAAOH,GACTO,EAAS,MAAM,CACb,SAAU,WACV,QAAS,4DACnB,CAAS,EAGHZ,EAAO,UAAU,IAAI,MAAM,CAC5B,OAAQW,EAAP,CACA,QAAQ,IAAIA,EAAM,OAAO,CAC/B,QAAc,CACRX,EAAO,UAAU,IAAI,MAAM,EAC3B,QAAQ,IAAG,CACZ,CACL,CAAG,CACH,CAAC,EAED,eAAeS,GAAc,CAC3B,aAAQ,GAEO,MAAMI,EAAM,IAAI,2BAA4B,CACzD,OAAQ,CACN,IAAK,qCACL,EAAGP,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUF,EACV,IACD,CACL,CAAG,GACa,IAChB,CAEA,eAAeM,EAAaF,EAAQ,CAClC,MAAMM,EAASN,EAAO,KAAK,OAAO,CAChCO,EAAM,CACJ,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAC5D,IAGCP,EACA;AAAA,8CACwCE;AAAA;AAAA;AAAA,2BAGnBD;AAAA,2BACAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2DAMgCC;AAAA,4DACCC;AAAA,8DACEC;AAAA,+DACCC;AAAA;AAAA,mBAK9D,EACD,EAEEvB,EAAQ,mBAAmB,YAAae,CAAM,EAC9CZ,EAAM,QAAO,EACbD,EAAc,UAAU,OAAO,MAAM,CACvC"}